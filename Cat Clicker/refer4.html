<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cat Clicker</title>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
    crossorigin="anonymous"></script>
</head>
<body>
<style>
    .cat-i { height: 100px; width: 150px; margin: 20px 5px; float: left;
    display: none; }
    .cat-i.show { display: block; }
    .cat-i img { width: 100%; height: 100%; }
</style>
    <ul class="cats"></ul>
<script type="text/javascript">
    var Cat = function(name, url) {
        this.name = name;
        this.url = url;
    };
    // cat template
    Cat.prototype.tpl = function() {
        return '<div class="cat-i">'
            + '<span class="name">' + this.name + '</span>'
            + '<img src=' + this.url + '">'
            + '<span class="count">0</span>'
          +'</div>';
    };
    Cat.prototype.listTpl = function() {
        return '<li class="cat">'
            + '<span class="name">' + this.name + '</span>'
          +'</li>';
    };
    // put in dom
    Cat.prototype.init = function() {
        $('body').append(this.tpl());
        $('.cats').append(this.listTpl());
    };

    // Initialize images
    var cats = [];
    cats.push( new Cat('Moo', 'img/number1.jpg').init() );
    cats.push( new Cat('Miu', 'img/number2.jpg').init() );
    cats.push( new Cat('Mau', 'img/number3.jpg').init() );
    cats.push( new Cat('Muhaha', 'img/number4.jpg').init() );
    cats.push( new Cat('Purrr', 'img/number5.jpg').init() );

    // cat handler on each image
    var catHandler = function(that) {
        var countEl = $(that).siblings('.count').text();
        var count = Number(countEl);
        $(that).siblings('.count').text(++count);
    };
    // cat list item handler
    var catListHandler = function(that) {
        $('.cat-i').each(function() {
            if ( $(that).find('.name').text() === $(this).find('.name').text() ) {
                $(this).addClass('show');
            } else {
                $(this).removeClass('show');
            }
        });
    };

    $('.cat-i').each(function() {
        $(this).find('img').on('click', function() {
            catHandler(this);
        });
    });
    $('.cat').each(function() {
        $(this).on('click', function() {
            catListHandler(this);
        });
    });
</script>
</body>
</html>
